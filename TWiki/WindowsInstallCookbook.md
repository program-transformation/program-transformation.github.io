::: {.fullPage}
::: {.twikiMiddleContainer}
::: {.twikiLeftBar}
::: {.twikiLeftBarContents}
**[TWiki](http://TWiki.org/)**

-   **[Welcome](WelcomeGuest){.twikiLink}**
-   **[Register](TWikiRegistration){.twikiLink}**

------------------------------------------------------------------------

-   **TWiki Web**
-   [TWiki Web Home](WebHome){.twikiLink}
-   [Changes](WebChanges){.twikiLink}
-   [Topics](WebTopicList){.twikiLink}
-   [Index](WebIndex){.twikiLink}
-   [Search](WebSearch){.twikiLink}

------------------------------------------------------------------------

-   **TWiki Webs**
    -   [BX12](../BX12/WebHome){.twikiLink}
    -   [Book](../Book/WebHome){.twikiLink}
    -   [CC[^?^](http://www.program-transformation.org/edit/CC/WebHome?topicparent=TWiki.WindowsInstallCookbook)]{.twikiNewLink
        style="background : #FFFFCE;"}
    -   [Compare](../Compare/WebHome){.twikiLink}
    -   [GPCE06](../GPCE06/WebHome){.twikiLink}
    -   [GPCE08](../GPCE08/WebHome){.twikiLink}
    -   [GPCE09](../GPCE09/WebHome){.twikiLink}
    -   [GPCE10](../GPCE10/WebHome){.twikiLink}
    -   [GPCE11](../GPCE11/WebHome){.twikiLink}
    -   [GPCE12](../GPCE12/WebHome){.twikiLink}
    -   [GPCE13](../GPCE13/WebHome){.twikiLink}
    -   [GPCE14](../GPCE14/WebHome){.twikiLink}
    -   [Gmt](../Gmt/WebHome){.twikiLink}
    -   [Gpce](../Gpce/WebHome){.twikiLink}
    -   [Gpce03](http://www.program-transformation.org/Gpce03/WebHome){.twikiLink}
    -   [Gpce04](../Gpce04/WebHome){.twikiLink}
    -   [Gpce05](../Gpce05/WebHome){.twikiLink}
    -   [Gpceorg](../Gpceorg/WebHome){.twikiLink}
    -   [HART14](../HART14/WebHome){.twikiLink}
    -   [IFIPWG211](http://www.program-transformation.org/IFIPWG211/WebHome){.twikiLink}
    -   [IPA06](../IPA06/WebHome){.twikiLink}
    -   [Main](../Main/WebHome){.twikiLink}
    -   [Octave](../Octave/WebHome){.twikiLink}
    -   [PEPM07](../PEPM07/WebHome){.twikiLink}
    -   [PEPM08](../PEPM08/WebHome){.twikiLink}
    -   [PEPM10](../PEPM10/WebHome){.twikiLink}
    -   [PEPM11](../PEPM11/WebHome){.twikiLink}
    -   [PEPM12](../PEPM12/WebHome){.twikiLink}
    -   [PEPM13](../PEPM13/WebHome){.twikiLink}
    -   [PEPM14](../PEPM14/WebHome){.twikiLink}
    -   [PHP](../PHP/WebHome){.twikiLink}
    -   [Sandbox](../Sandbox/WebHome){.twikiLink}
    -   [Sdf](../Sdf/WebHome){.twikiLink}
    -   [SdfBackup](../SdfBackup/WebHome){.twikiLink}
    -   [Spoofax](../Spoofax/WebHome){.twikiLink}
    -   [Stratego](../Stratego/WebHome){.twikiLink}
    -   [Sts](../Sts/WebHome){.twikiLink}
    -   [TWiki](WebHome){.twikiLink}
    -   [Tiger](../Tiger/WebHome){.twikiLink}
    -   [Tools](../Tools/WebHome){.twikiLink}
    -   [Transform](../Transform/WebHome){.twikiLink}
    -   [Variability](../Variability/WebHome){.twikiLink}
    -   [WGLD](../WGLD/WebHome){.twikiLink}
    -   [WebDSL](../WebDSL/WebHome){.twikiLink}
    -   [default](DefaultWebHome){.twikiLink}

::: {.twikiLeftBarPersonal}
::: {style="overflow:auto; height:1px; width:1px;"}
Changes Index Search

------------------------------------------------------------------------

Webs Book Compare GPCE06 Gmt Gpce Gpce04 Gpce05 IFIPWG211 IPA06 Main
Octave PEPM07 PEPM08 PHP Sandbox Sdf Stratego Sts TWiki Tiger Tools
Transform Variability default
[porn](http://www.estrategiavirtual.com/adult/) [free
porn](http://www.estrategiavirtual.com/free/)
:::
:::
:::
:::

::: {.twikiMain}
::: {.toolBar}
::: {.flexMenuBar}
::: {.flexMenu onmouseover="return showMenu(event, 100);" onmouseout="return hideMenu(event, 100);"}
Page

::: {#flexMenuContent100 .flexMenuContent}
-   [Edit
    Page](http://www.program-transformation.org/edit/TWiki/WindowsInstallCookbook?t=1536826920)
-   [Rename
    Page](http://www.program-transformation.org/rename/TWiki/WindowsInstallCookbook)
-   [Attach
    File](http://www.program-transformation.org/attach/TWiki/WindowsInstallCookbook)

<!-- -->

-   [Printable](http://www.program-transformation.org/view/TWiki/WindowsInstallCookbook?skin=print.pattern)
-   [Wiki
    Source](http://www.program-transformation.org/view/TWiki/WindowsInstallCookbook?skin=text&raw=on&contenttype=text/plain)

<!-- -->

-   [Rev
    6](http://www.program-transformation.org/view/TWiki/WindowsInstallCookbook?rev=1.6)
    [(diff 5)](http://www.program-transformation.org/rdiff/TWiki/WindowsInstallCookbook?rev1=1.6&rev2=1.5)
-   [Rev
    5](http://www.program-transformation.org/view/TWiki/WindowsInstallCookbook?rev=1.5)
    [(diff 4)](http://www.program-transformation.org/rdiff/TWiki/WindowsInstallCookbook?rev1=1.5&rev2=1.4)
-   [Rev
    4](http://www.program-transformation.org/view/TWiki/WindowsInstallCookbook?rev=1.4)
    [(diff 3)](http://www.program-transformation.org/rdiff/TWiki/WindowsInstallCookbook?rev1=1.4&rev2=1.3)
-   [Total
    History](http://www.program-transformation.org/rdiff/TWiki/WindowsInstallCookbook)

<!-- -->

-   [More
    \...](http://www.program-transformation.org/oops/TWiki/WindowsInstallCookbook?template=oopsmore&param1=1.6&param2=1.6)
:::
:::

::: {.flexMenu onmouseover="return showMenu(event, 102);" onmouseout="return hideMenu(event, 102);"}
Web

::: {#flexMenuContent102 .flexMenuContent}
-   [Recent Changes](WebChanges){.twikiLink}
-   [Notify Service](WebNotify){.twikiLink}
-   [News](WebNews){.twikiLink}

<!-- -->

-   [Page Index](WebIndex){.twikiLink}
-   [Search](WebSearch){.twikiLink}

<!-- -->

-   [More
    \...](http://www.program-transformation.org/oops/TWiki/WindowsInstallCookbook?template=oopsmore&param1=1.6&param2=1.6)
:::
:::

::: {.flexMenu onmouseover="return showMenu(event, 103);" onmouseout="return hideMenu(event, 103);"}
Wiki

::: {#flexMenuContent103 .flexMenuContent}
-   [About
    TWiki](http://www.program-transformation.org/view/TWiki/WebHome)
-   [Text
    Formatting](http://www.program-transformation.org/view/TWiki/TextFormattingRules)

<!-- -->

-   [Registration](http://www.program-transformation.org/view/TWiki/TWikiRegistration)
-   [Change
    Password](http://www.program-transformation.org/view/TWiki/ChangePassword)
-   [Reset
    Password](http://www.program-transformation.org/view/TWiki/ResetPassword)

<!-- -->

-   [Users](http://www.program-transformation.org/view/Main/TWikiUsers)
-   [Groups](http://www.program-transformation.org/view/Main/TWikiGroups)
:::
:::
:::
:::

::: {.twikiTopic}
Windows Install Cookbook {#windows-install-cookbook .twikiTopicTitle}
========================

::: {.twikiWebTitle}
TWiki
:::

::: {.twikiToc}
-   [Windows Install
    Cookbook](WindowsInstallCookbook#Windows_Install_Cookbook)
    -   [Introduction](WindowsInstallCookbook#Introduction)
    -   [Summary](WindowsInstallCookbook#Summary)
    -   [Recent updates](WindowsInstallCookbook#Recent_updates)
    -   [Scope](WindowsInstallCookbook#Scope)
        -   [Alternatives](WindowsInstallCookbook#Alternatives)
    -   [Checking versions](WindowsInstallCookbook#Checking_versions)
    -   [Pre-requisites and
        upgrades](WindowsInstallCookbook#Pre_requisites_and_upgrades)
        -   [Text editing](WindowsInstallCookbook#Text_editing)
    -   [The Unix/Windows
        Environment](WindowsInstallCookbook#The_Unix_Windows_Environment)
        -   [The Cygwin
            environment](WindowsInstallCookbook#The_Cygwin_environment)
        -   [The Apache
            environment](WindowsInstallCookbook#The_Apache_environment)
        -   [The Perl
            environment](WindowsInstallCookbook#The_Perl_environment)
    -   [Installing
        Components](WindowsInstallCookbook#Installing_Components)
        -   [TWiki (part 1)](WindowsInstallCookbook#TWiki_part_1)
        -   [Apache](WindowsInstallCookbook#Apache)
        -   [Cygwin, Unix tools, Perl and
            RCS](WindowsInstallCookbook#Cygwin_Unix_tools_Perl_and_RCS)
        -   [TWiki (part 2)](WindowsInstallCookbook#TWiki_part_2)
    -   [Configuring
        components](WindowsInstallCookbook#Configuring_components)
        -   [Configuring
            Apache](WindowsInstallCookbook#Configuring_Apache)
        -   [Configuring
            TWiki](WindowsInstallCookbook#Configuring_TWiki)
    -   [Editing the CGI
        scripts](WindowsInstallCookbook#Editing_the_CGI_scripts)
        -   [Perl module
            installation](WindowsInstallCookbook#Perl_module_installation)
            -   [CPAN: The Hard
                Way](WindowsInstallCookbook#CPAN_The_Hard_Way)
        -   [Re-locking RCS
            files](WindowsInstallCookbook#Re_locking_RCS_files)
        -   [Email setup](WindowsInstallCookbook#Email_setup)
    -   [Testing your TWiki
        installation](WindowsInstallCookbook#Testing_your_TWiki_installation)
        -   [Troubleshooting](WindowsInstallCookbook#Troubleshooting)
        -   [Permissions](WindowsInstallCookbook#Permissions)
    -   [Next Steps](WindowsInstallCookbook#Next_Steps)
        -   [Improved
            authentication](WindowsInstallCookbook#Improved_authentication)
        -   [Improved
            performance](WindowsInstallCookbook#Improved_performance)
    -   [Format of
        filenames](WindowsInstallCookbook#Format_of_filenames)
    -   [Credits](WindowsInstallCookbook#Credits)
:::

[]{#Windows_Install_Cookbook} Windows Install Cookbook
======================================================

[]{#Introduction} Introduction
------------------------------

This cookbook is intended to get you up and running with TWiki on
Windows quickly, with as few problems as possible. The \'cookbook\'
approach is simply to restrict the many choices that someone installing
TWiki must make, so that a reasonably well-defined procedure can be
followed - new users can simply follow the steps, while experts can use
this as more of a guideline.

-   ***NOTE***: This cookbook is not 100% complete (e.g. it doesn\'t
    cover authentication setup described by existing documentation), but
    it has been used successfully for over a year now - it is quite
    accurate and should get you started if you follow the instructions.
    Please provide feedback in
    [TWiki:Codev.WindowsInstallCookbookComments](http://twiki.org/cgi-bin/view/Codev.WindowsInstallCookbookComments "'Codev.WindowsInstallCookbookComments' on TWiki.org").
-   ***NOTE***: You will get the best results from following this
    cookbook **exactly**, using the same directories, etc - however, if
    you really do need to vary things, it should be fairly obvious what
    to do.

\--
[RichardDonkin[^?^](http://www.program-transformation.org/edit/Main/RichardDonkin?topicparent=TWiki.WindowsInstallCookbook)]{.twikiNewLink
style="background : #FFFFCE;"} - 24 Feb 2002

[]{#Summary} Summary
--------------------

![NEW](../pub/TWiki/TWikiDocGraphics/new.gif){width="28" height="8"} -
See **[WindowsInstallSummary](WindowsInstallSummary){.twikiLink}** for a
concise summary of the whole cookbook.

[]{#Recent_updates} Recent updates
----------------------------------

-   28 Jun 2004 - updated to reflect experiences installing beta20040507
    on Windows NT
-   2 Jun 2003 - updated to include setting `HOME` since this is not
    always picked up by Cygwin
-   30 Apr 2003 - New issue with Perl 5.8 found, added warning not to
    use Perl 5.8
-   02 Mar 2003 - updated to restrict `register` script edits to Dec
    2001 release
-   30 Nov 2002 - added `binutils` to list of Cygwin packages, and added
    warning not to use Apache 2.0
-   20 Nov 2002 - update to avoid
    [TWiki:Support.InstallDigestSHA1Fails](http://twiki.org/cgi-bin/view/Support.InstallDigestSHA1Fails "'Support.InstallDigestSHA1Fails' on TWiki.org")
    when installing Digest::SHA1 on Windows 2000
-   12 Nov 2002 - setting `SMTPMAILHOST` for user registration and
    notification
-   Older changes are in
    [TWiki:TWiki.WindowsInstallCookbookHistory](http://twiki.org/cgi-bin/view/TWiki.WindowsInstallCookbookHistory "'TWiki.WindowsInstallCookbookHistory' on TWiki.org")

[]{#Scope} Scope
----------------

This document covers installation of the TWiki **01-Sep-2004**
production release
([TWiki:Codev/TWikiRelease01Sep2004](http://twiki.org/cgi-bin/view/Codev/TWikiRelease01Sep2004 "'Codev/TWikiRelease01Sep2004' on TWiki.org"))
in the following environment - if you want to use a different
environment, feel free to use this as a guideline only.

  -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [Component](WindowsInstallCookbook@sortcol=0&table=1&up=0#sorted_table "Sort by this column")   [Name, version](WindowsInstallCookbook@sortcol=1&table=1&up=0#sorted_table "Sort by this column")   [Comment](WindowsInstallCookbook@sortcol=2&table=1&up=0#sorted_table "Sort by this column")
  ----------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------------------- ---------------------------------------------------------------------------------------------
  Operating System                                                                                Windows 2000                                                                                        Should also work for Windows NT

  Web Server                                                                                      Apache 1.3.27                                                                                       Windows-specific security holes fixed in this build\
                                                                                                                                                                                                      (check latest version at <http://httpd.apache.org>, but **don\'t** use Apache 2.0 yet)

  Unix tools                                                                                      Cygwin 1.3.9                                                                                        Simplest way to get a whole set of required tools

  Perl                                                                                            Cygwin perl-5.6.1-2                                                                                 Comes with Cygwin, **don\'t** use Perl 5.8.0 yet

  RCS                                                                                             Cygwin rcs-5.7-2                                                                                    Comes with Cygwin, includes a file corruption bugfix
  -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Why this choice of packages? Because I\'ve tried them, and they work
well, without requiring a complicated setup\... In particular, Apache is
the commonest choice for TWiki on Unix/Linux, Cygwin Perl is very close
to Unix Perl, and the Cygwin RCS is regularly updated, with a recent
TWiki-relevant bug fix in Feb 2002. Cygwin also lets you install the
Unix tools, Perl and RCS in a single step, saving quite a lot of time.

More recent minor versions should be OK, but they can introduce bugs.

![NEW](../pub/TWiki/TWikiDocGraphics/new.gif){width="28" height="8"}
Major version upgrades, such as Apache 2.0 and Perl 5.8, are **very
likely** to cause problems - for example, Apache 2.0 is unable to
authenticate users created by the current TWiki user registration script
(due to a feature being removed in 2.0, see
[TWiki:Support.FailedAuthenticationWithApache2OnWinNT](http://twiki.org/cgi-bin/view/Support.FailedAuthenticationWithApache2OnWinNT "'Support.FailedAuthenticationWithApache2OnWinNT' on TWiki.org")).
Similarly, Perl 5.8 may introduce issues due to its Unicode features and
has caused problems due to a bug in `CGI.pm`. Even though the Apache
group says that Apache 2.0 is the best version, that\'s not true for
TWiki at present. For more information, see
[TWiki:Codev.IssuesWithApache2dot0](http://twiki.org/cgi-bin/view/Codev.IssuesWithApache2dot0 "'Codev.IssuesWithApache2dot0' on TWiki.org")
and
[TWiki:Codev.IssuesWithPerl5dot8](http://twiki.org/cgi-bin/view/Codev.IssuesWithPerl5dot8 "'Codev.IssuesWithPerl5dot8' on TWiki.org").

### []{#Alternatives} Alternatives

The following Windows operating systems have been tested following the
instructions given here:

-   Windows NT, 98 and ME all work fine with minor tweaks
-   Windows XP works in theory, but see the Apache site for details of
    XP-related bugs, and other packages\' sites for any peculiarities of
    XP. Please report any XP installations on
    [TWiki:Codev.TWikiOnWindowsKnownConfigurations](http://twiki.org/cgi-bin/view/Codev.TWikiOnWindowsKnownConfigurations "'Codev.TWikiOnWindowsKnownConfigurations' on TWiki.org"),
    and comment at
    [TWiki:Codev.WindowsInstallCookbookComments](http://twiki.org/cgi-bin/view/Codev.WindowsInstallCookbookComments "'Codev.WindowsInstallCookbookComments' on TWiki.org").

There are doubtless other combinations of components that may work - in
particular:

-   [TWiki:Codev.ActiveState](http://twiki.org/cgi-bin/view/Codev.ActiveState "'Codev.ActiveState' on TWiki.org")
    Perl involves only minor changes to `TWiki.cfg`, and is probably a
    simpler choice if you need an easy way to install mod\_perl (see
    [TWiki:Codev.ModPerl](http://twiki.org/cgi-bin/view/Codev.ModPerl "'Codev.ModPerl' on TWiki.org")).
    [TWiki:Codev.ActiveState](http://twiki.org/cgi-bin/view/Codev.ActiveState "'Codev.ActiveState' on TWiki.org")
    Perl can be substituted without too much hassle, and in fact the
    same `TWiki.cfg` can be used for both
    [TWiki:Codev.ActiveState](http://twiki.org/cgi-bin/view/Codev.ActiveState "'Codev.ActiveState' on TWiki.org")
    and Cygwin Perl.
-   Using a different web server is certainly possible, but the setup
    required for each webserver varies greatly (see
    [TWiki:Codev.TWikiOnWindows](http://twiki.org/cgi-bin/view/Codev.TWikiOnWindows "'Codev.TWikiOnWindows' on TWiki.org")
    for pages about specific web servers). You may find it easiest to
    get a working system with Apache and then switch over to another web
    server.

Covering the whole range of additional possibilities, particularly web
servers, would make this cookbook too complex, and is best handled as a
separate activity.

For improved performance on Windows through using `mod_perl`, you may
want to try
[TWiki:Codev.WindowsModPerlInstallCookbook](http://twiki.org/cgi-bin/view/Codev.WindowsModPerlInstallCookbook "'Codev.WindowsModPerlInstallCookbook' on TWiki.org").

[]{#Checking_versions} Checking versions
----------------------------------------

If you already have some of these add-ons installed, here\'s how to
check the versions - this assumes you have
[TWiki:Codev.CygWin](http://twiki.org/cgi-bin/view/Codev.CygWin "'Codev.CygWin' on TWiki.org")
already installed:

       $ : Cygwin DLL version is the number in 1.3.x format
       $ uname -r
       $ less c:/your-apache-dir/Announcement
       $ perl -v
       $ rcs -V

If you have an older version of any component, do yourself a favour and
**upgrade it** as part of the install process.

[]{#Pre_requisites_and_upgrades} Pre-requisites and upgrades
------------------------------------------------------------

You will need to have local administrator rights and be comfortable with
Windows administration.

This cookbook is intended for a clean install, i.e. none of these
components are already installed. However, since Cygwin and Apache\'s
installation process is fairly upgrade-friendly, upgrades should work as
well - take backups of all your data and config files first, though!
[]{#TextEditing}

### []{#Text_editing} Text editing

Editing Cygwin files should be done with an editor that can handle Unix
file format (see the Cygwin binary mode section below). The installation
process suggests:

-   `nano`, a very simple text editor, installed optionally during
    Cygwin installation. Always launch `nano` with the -w command-line
    option to turn off wrapping of long lines.
-   `vi`, a more sophisticated editor that should be familiar to most
    UNIX users

These both non-GUI editors, but if you prefer to use a GUI editor you
should install PFE, a freeware editor that supports Unix format files.
PFE is available on
[download.com](http://download.cnet.com/downloads/0-4003619-100-904159.html?tag=st.dl.10001-103-1.lst-7-1.904159)
and [Simtel](http://www.simtel.net/pub/dl/11983.shtml).

Another good
[TWiki:Codev.OpenSource](http://twiki.org/cgi-bin/view/Codev.OpenSource "'Codev.OpenSource' on TWiki.org")
editor is SciTE (aka WSciTE), available at
<http://www.scintilla.org/SciTE.html>.

[]{#The_Unix_Windows_Environment} The Unix/Windows Environment
--------------------------------------------------------------

It\'s a little known fact that you can use pathnames such as `c:/apache`
almost everywhere in Windows - try it in a File Open dialogue box. The
main exception is the Windows \"DOS\" command line shell - here, you
must use double quotes around forward slashes, e.g. `dir "c:/apache"`
will work fine.

The reason this matters is that `'\'` is a special character to Perl and
other tools, so it\'s much easier to use `'/'` everywhere.

### []{#The_Cygwin_environment} The Cygwin environment

[TWiki:Codev.CygWin](http://twiki.org/cgi-bin/view/Codev.CygWin "'Codev.CygWin' on TWiki.org")
is a Unix-like environment for Windows - many of its tools support the
`c:/apache` format, but it also provides a more Unixlike syntax, e.g.
`/usr/bin/rcs.exe`, because some Unix tools ported onto Cygwin only
support the Unix format.

When you launch a Cygwin shell, your existing PATH variable is
translated from the Windows format to the Unix format, and the \';\'
separators in the Windows PATH are changed into \':\' separators as
required by Unix. A Cygwin tool (e.g. Cygwin Perl or Cygwin RCS) will
always use the Unix PATH format, and will accept Unix format pathnames.

### []{#The_Apache_environment} The Apache environment

Apache runs as a native Windows process and has nothing to do with
Cygwin (at least the version used in this cookbook doesn\'t). Hence it
supports c:/ pathnames in its config files and the first line of Perl
CGI scripts.

If you need to use spaces in file names (not recommended), put double
quotes around the file name in the `httpd.conf` file. There have been
some security-related bugs in Apache with long pathnames, which are a
bit more likely if you use spaces, so it\'s best to just avoid long
names and using spaces.

### []{#The_Perl_environment} The Perl environment

Once Perl has been launched by Apache, it is in Cygwin mode, and so is
everything it launches, including `ls`, `egrep`, and the RCS tools that
it (typically) launches with the `bash` shell.

If you need to use spaces in file names (not recommended), you *may* be
able to put double quotes around the file name in the `TWiki.cfg` file -
however, it\'s not clear whether all the TWiki code would work with
this.

[]{#Installing_Components} Installing Components
------------------------------------------------

Enough background, let\'s get on with the installation.

### []{#TWiki_part_1}[]{#TWiki_part_1_} TWiki (part 1)

Head to <http://twiki.org>, click the download link, and fill in the
form to request a URL for download. You\'ll get an automated email,
which should arrive by the time you need it.

### []{#Apache} Apache

*Steps 1 and 2 can be shortcut by opening the self-installing executable
on the Apache website that installs Apache 1.3.x. The painful details
below are mainly helpful when detecting where things are going
wrong\.....*

**1. Download Apache**

-   Check at <http://httpd.apache.org/> for any security announcements
-   Check the latest 1.3.x version number on [this
    page](http://www.apache.org/dist/httpd/Announcement.html)
-   Find a local mirror using <http://www.apache.org/dyn/closer.cgi> -
    choose httpd, then binaries, then win32
-   The file to download is `apache_1.3.X-win32-x86-no_src.msi` where
    \'X\' is 20 or higher
    -   Note that this is a Microsoft Installer format file (.MSI)

<!-- -->

-   ***NOTE***: If you are using Windows NT, download the .MSI installer
    (`instmsi.exe`) from the [Apache Win32 download
    page](http://httpd.apache.org/dist/httpd/binaries/win32/) - this
    enables you to install .MSI files. You may need to update the .MSI
    Installer if you have an old version under NT.
-   ***NOTE***: The Apache package itself requires a download of around
    2 MB, and up to 10 MB of free disk space once installed

**2. Install Apache**

-   Double-click the .MSI file to run the installer
-   Specify `c:\` as the installation directory - this actually installs
    Apache into `c:\apache` (if you specify `c:\apache`, it installs
    into `c:\apache\Apache`). *Putting Apache into `c:\Program Files` is
    not recommended for easy editing of Apache config files from
    Cygwin.*
-   On Windows NT/2000 you can choose to run Apache as a service or as a
    normal program - see the Apache docs for details.
    -   ***NOTE***: Needs a bit more detail here\... See the excellent
        documents about [Installing Apache on
        Windows](http://httpd.apache.org/docs/windows.html) and [Running
        Apache as a Windows NT/2000
        service](http://httpd.apache.org/docs/win_service.html).

**3. Test Apache**

-   If necessary, start apache, by selecting \'Start\' from the
    \'Start-\>Programs-\>Apache\...-\>Control Apache Server\' menu.
-   Point your browser at <http://yourdomain.com/> to see the Apache
    intro page.

Congratulations, you now have a working web server!

To restart Apache after changing its config, type:

-   `apache -k restart` for standalone Apache process running in another
    window
-   `apache -k restart -n apache` for Apache running as a Win2000
    service (-n gives name of service)

Another useful command is `apache -k stop`.

### []{#Cygwin_Unix_tools_Perl_and_RCS} Cygwin, Unix tools, Perl and RCS

**4. Install Cygwin**

Head to <http://cygwin.com>, and click the
![cygwin-icon.gif](../pub/TWiki/WindowsInstallCookbook/cygwin-icon.gif){width="21"
height="21"} ***Install or update now!*** link. Save the `setup.exe` in
a directory, e.g. `c:\download\cygwin-dist`.

Now run the Cygwin `setup.exe` file - this will also install Perl and
RCS in one fell swoop.

-   Choose Internet install
-   On first page, accept the defaults (be sure that the ***default text
    file type is Unix*** to avoid problems with attachment uploads, and
    specify \'install for all users\')
-   Select `c:\download\cygwin-dist` as the local package directory, and
    suitable proxy settings, then pick a local mirror site
-   In the package list screen, hit the **View** button until you get an
    alphabetical list that says **Full** to the right of the button.
-   Leave the radio button on **Curr** (Current)
    -   The Current column shows what\'s installed on your system (if
        anything)
-   For each package, make sure the **New** column in the installer has
    a version number under it. If it says \'Skip\' or \'Keep\' (meaning
    it\'s already installed), single-click that word until a version
    number is shown. Make sure you select the following packages - *in
    recent Cygwin setups you will have to select Perl 5.6.1 explicitly*:
    -   `bash`
    -   `binutils`
    -   `diffutils`
    -   `gcc`
    -   `grep`
    -   `gzip`
    -   `make`
    -   `nano` (or `vim` if you prefer the vi editor)
    -   `ncftp`
    -   `pcre`
    -   `perl` (5.6.1-2 or higher, but **not** 5.8.0)
    -   `rcs` (5.7-2 or higher)
    -   `tar`
    -   `textutils`
    -   `unzip`
    -   `w32api`
    -   `wget` (optional, useful for Perl install and
        [TWiki:Codev.ReadWriteOfflineWiki](http://twiki.org/cgi-bin/view/Codev.ReadWriteOfflineWiki "'Codev.ReadWriteOfflineWiki' on TWiki.org"))
    -   NOTE: Do **not** include `lynx` if you are upgrading from an
        older Cygwin installation (to avoid annoying DLL messages) - if
        you want Lynx, read the [Cygwin FAQ
        entry](http://cygwin.com/faq/faq.html#SEC32) and upgrade
        `libncurses5`.
-   Hit Next to do the installation.
    -   ***NOTE***: The mandatory packages require a download of about
        12 MB - about half of this is Perl, which would be necessary
        even without Cygwin, and most of the rest is `gcc`, which is
        required for simple installation of Perl modules that use the C
        language. Something like 20 to 30 MB of free disk space should
        be enough for Cygwin, but I didn\'t test this (try a `du -k /`
        after a new install and let me know the last figure).
    -   ***NOTE***: The installer keeps a local copy of downloaded
        files, so it\'s easy to re-install without re-downloading.
-   Let the installer create the shortcuts suggested
-   You can always come back and re-run the installer again later if you
    missed anything.

Environment setup:

-   Set the `HOME` environment variable to `c:\cygwin\home\YOURUSER`,
    where `YOURUSER` is your userid, e.g. `jsmith` or `administrator`.
    -   Windows NT, XP and 2000: Go into Control Panel, double-click the
        System icon, and select Advanced, then click Environment
        Variables. Under User Variables, click *New\...*. Now type
        `HOME` (must be upper case) as the variable name, and
        `c:\cygwin\home\YOURUSER` as the value, and hit OK.
    -   Windows 98 and ME - add to AUTOEXEC.BAT and reboot
-   You can also set `TEMP` to `c:\temp` at this point, if you prefer
    this to editing the Cygwin `~/.profile` file. (`HOME` can\'t be set
    in the `~/.profile` file.)
-   Create the `c:\cygwin\home\YOURUSER` directory

**5. Test Cygwin**

-   Launch the desktop icon - this runs the `bash` shell, which has
    command line editing features
    -   Use the cursor up key to recall previous commands - normal PC
        editing keys can then be used to edit a command
    -   TIP: When typing a directory or file name, hit the TAB key after
        the first few letters of the name - `bash` will \'complete\' the
        name. If `bash` beeps at you, hit TAB again to see the
        files/directories that match the name so far, and type a bit
        more before hitting TAB. This saves a lot of time!
-   Type `rcs -V` - you should see the RCS version, 5.7
-   Type `perl -v` - you should see cygwin mentioned in the first line,
    and the Perl version, 5.6.1
-   Type `grep home /etc/passwd` - you should see some output.

The [Cygwin User
Guide](http://cygwin.com/cygwin-ug-net/cygwin-ug-net.html) is well worth
reading for some background on how Cygwin works.

**6. Configure Cygwin for binary mode**

-   ***This is very important - omitting this step leads to a partially
    working system that corrupts RCS files*** - without this, Cygwin
    tools (including Perl and RCS) will add unwanted carriage returns
    (Ctrl/M, \'\\r\') to files in an attempt to translate between the
    Windows and Unix text file formats (Unix text files only use line
    feeds (\'\\n\').
    -   This has been a great time sink, causing numerous subtle
        problems - see
        [TWiki:Codev.CookbookLineEndingProblems](http://twiki.org/cgi-bin/view/Codev.CookbookLineEndingProblems "'Codev.CookbookLineEndingProblems' on TWiki.org")
-   Stay in the Cygwin (bash) shell, and type the following (use only
    forward slashes, i.e. \'/\'):

<!-- -->

       $ mkdir /twiki /c c:/twiki
       $ mount -b -s c:/twiki /twiki
       $ mount -b -s c:/ /c
       $ mount -b -c /cygdrive
       $ mount
       Device              Directory           Type         Flags
       C:\cygwin\bin       /usr/bin            system       binmode
       C:\cygwin\lib       /usr/lib            system       binmode
       C:\cygwin           /                   system       binmode
       c:\twiki            /twiki              system       binmode
       c:                  /c                  system       binmode

-   This configures `/twiki` (known as a \'mount point\') to map onto
    `c:/twiki` and for that directory tree to always be in binary mode,
    and does the same for `/c`, mapping it onto `c:/`. The last-but-one
    command sets binary as the default for any unmounted drives (e.g.
    `z:/`, aka `/cygdrive/z`).
-   It is **very important** that all lines in the output of `mount` say
    \'binmode\' under Flags
    -   If the lines for `C:\cygwin` directories do not, you should
        uninstall and then re-install Cygwin to ensure that binary
        attachment uploads will work.
-   You can now refer to files using Unix paths, e.g. `/twiki/bin/view`
    or `/c/apache/Announcement` - see the [Cygwin
    documentation](http://www.cygwin.com/cygwin-ug-net/using.html) for
    more details on this.
-   Now test this, still using the Cygwin shell:
    -   Type `cd /twiki`
    -   Type `echo hi >t`
    -   Type `cat -v t` - you should see `hi` as the output
    -   If you see filename errors, your **mounts did not work** for
        some reason - check your typing
    -   If you see `hi^M` as output, **your /twiki directory is not in
        binary mode**
    -   Clean up by doing `rm t`

This setup is written to the Windows registry, so there\'s no need to
put these commands into a `.profile` file. For more information on
binary vs text mode, see this [User Guide
section](http://cygwin.com/cygwin-ug-net/using-textbinary.html) and this
[FAQ entry](http://cygwin.com/faq/faq.html#SEC54).

### []{#TWiki_part_2}[]{#TWiki_part_2_} TWiki (part 2)

**7. Download TWiki**

Download the latest TWiki release from <http://twiki.org/> and save it
in the `c:/twiki` directory.

**8. Install TWiki**

Unzip the ZIP file under `c:/twiki` using
[WinZip](http://www.winzip.com/), or by going into Cygwin and doing the
following - you can hit the `TAB` key to complete filenames after
you\'ve typed the first part:

       $ cd /twiki
       $ unzip TWiki20011201.zip

[]{#Configuring_components} Configuring components
--------------------------------------------------

Now that all the components are installed, you need to configure them.

### []{#Configuring_Apache} Configuring Apache

The setup given here is fairly simple, in that it allows only TWiki to
be served by the web server. For more complex setups, you can
investigate the Alias and ScriptAlias commands that are left commented
out in this configuration.

-   ***NOTE***: This needs reviewing for security holes and to ensure
    nothing is missed, though this config does work.

**1. Configure Apache (part 1)**

Using a suitable text editor (see \#TextEditing, above) edit
`c:/apache/conf/httpd.conf` as follows - this tells Apache where TWiki
lives, and removes the need to tinker with the Windows environment
settings.

-   Note the trailing \'/\' characters in various places - they are
    important!

<!-- -->

-   Create the `c:\temp` directory, by typing `mkdir c:\temp` in a DOS
    command line window
-   Edit the following lines, some of which already exist in the file:

<!-- -->

    # Change this to point to the Apache administrator (e.g. you)
    ServerAdmin you@yourdomain.com

    # Replaces DocumentRoot "C:/apache/htdocs"
    DocumentRoot "C:/twiki"

    # Replaces <Directory "C:/apache/htdocs">
    <Directory "C:/twiki">

-   Add the following lines - the Alias and ScriptAlias lines can be
    omitted in this setup

<!-- -->

    # Alias /twiki/ "C:/twiki/"
    # ScriptAlias /twiki/bin/ "C:/twiki/bin/"
    <Directory  "C:/twiki/bin/">
        # RD: Changed None to All in next line, to enable .htaccess
        AllowOverride All
        Allow From All
        Options  ExecCGI
        SetHandler cgi-script
    </Directory>

    # Environment setup required to run Apache as service or as a
    # standalone process.
    <IfModule mod_env.c>
       # Adjust TZ for your server timezone, e.g. EST5EDT - put the non-daylight-savings
       # timezone code first (e.g. EST or GMT), followed by the number of hours that it's behind GMT 
       # during non-daylight-savings time (use '-5' for timezones in advance of GMT).
       SetEnv TZ GMT0BST
       SetEnv RCSINIT -x,v/
       # Adjust TEMP and TMP for your server and create directories if necessary
       SetEnv TEMP c:/temp
       SetEnv TMP c:/temp
       SetEnv LOGNAME system
       SetEnv HOME c:/twiki
    </IfModule>

**2. Configure Apache (part 2)**

Add an AddHandler line to the `<IfModule mod_mime.c>` section of
`httpd.conf` - this removes the need to rename all the TWiki CGI scripts
later in the installation.

-   Note the trailing \'.\' on the AddHandler line.

<!-- -->

    #
    # Document types
    #
    <IfModule mod_mime.c>
        # TWiki setup - avoid renaming scripts
        AddHandler cgi-script .
    ...

### []{#Configuring_TWiki} Configuring TWiki

**3. Configure TWiki**

Edit the TWiki config file, `c:/twiki/lib/TWiki.cfg` (or in Cygwin
terms, `/twiki/lib/TWiki.cfg`) as follows:

-   ***NOTE***: It should be possible to use `c:/twiki` format pathnames
    for Cygwin, given the above binmode setup, but I have not tested
    this fully - a Cygwin Perl test script does generate binary mode
    files in this configuration, so it should work with RCS as well
    (really need a small RCS file corruption test case). Watch out for
    RCS file corruption carefully if you do try `c:/twiki` pathnames
    with Cygwin, and do report your experiences\...
-   ***NOTE***: Some recent versions of Cygwin (e.g. 1.3.10) seem to
    create \'symbolic links\' from `fgrep` and `egrep` to `grep`,
    requiring the settings for these commands to point directly to
    `grep` (with suitable flags to provide `fgrep` and `egrep`
    behaviour).

<!-- -->

    # variables that need to be changed when installing on a new server:
    # ==================================================================
    #                   http://your.domain.com/twiki : link of TWiki icon in upper left corner :
    $wikiHomeUrl      = "http://yourdomain.com/bin/view";
    #                   Host of TWiki URL :    (Example "http://myhost.com:123")
    $defaultUrlHost   = "http://yourdomain.com";
    #                    : cgi-bin path of TWiki URL:
    $scriptUrlPath    = "/bin";
    #                   /pub : Public data path of TWiki URL (root of attachments) :
    $pubUrlPath       = "/pub";

    # NOTE: Next three settings should be valid absolute pathnames using Cygwin; if using
    # TWiki:Codev.ActiveState Perl, use z:/twiki format pathnames if your TWiki directory is not on C:.

    #                   Public data directory, must match $pubUrlPath :
    $pubDir           = "/twiki/pub";
    #                   Template directory :
    $templateDir      = "/twiki/templates";
    #                   Data (topic files) root directory :
    $dataDir          = "/twiki/data";

    ....

    #                   Set ENV{'PATH'} explicitly for taint checks ( #!perl -T option ) :
    #                   (Note: PATH environment variable is not changed if set to "")

    # On Windows, $safeEnvPath needs only one component, the directory where RCS is installed
    # - used by 'rcsdiff' to run 'co' program, so PATH must be correct.

    # Unix/Linux setting:
    # $safeEnvPath      = "/bin:/usr/bin";

    # Using Cygwin perl, so can use Unix-like paths, with ':' as separator.
    # Note that /usr/bin and /bin are identical due to default /usr/bin mount
    # in Cygwin.  Must NOT use 'c:/foo' type paths, as ':' is taken as separator
    # meaning that 'c' is interpreted as a pathname, giving Perl taint error.
    $safeEnvPath      = "/bin";

    # If using ActiveState perl, use Windows paths instead
    # $safeEnvPath      = "c:/cygwin/bin";

    ...

    #                   RCS directory (find out by 'which rcs') :
    $rcsDir           = "c:/cygwin/bin";

    ...

    #                   Unix egrep command :
    $egrepCmd         = "/bin/grep -E";
    #                   Unix fgrep command :
    $fgrepCmd         = "/bin/grep -F";

For the cookbook install using Cygwin Perl, there\'s no more `TWiki.cfg`
editing to be done, so you can get onto the next section.

-   For
    [TWiki:Codev.ActiveState](http://twiki.org/cgi-bin/view/Codev.ActiveState "'Codev.ActiveState' on TWiki.org")
    Perl, you need to make these additional edits further down the
    file - this is the only place where backslashes are needed. (See
    [TWiki:Codev.CookbookActivePerlSetup](http://twiki.org/cgi-bin/view/Codev.CookbookActivePerlSetup "'Codev.CookbookActivePerlSetup' on TWiki.org")
    for some extra Perl setup that should remove the need for these
    edits.)

<!-- -->

    #                   NOTE: When using ActiveState Perl, you must specify
    #                   a full Windows-style pathname, using '\\' for backslashes,
    #                   for the ls, egrep and fgrep commands, because Cygwin's shell
    #                   is not used - forward slashes are OK in Windows everywhere
    #                   except in the cmd.exe shell. Drive letters are OK - e.g.
    #                   'c:\\foo\\ls' will work.  When using Cygwin perl, just
    #                   use the default '/bin/ls' type settings.
    #
    #                   Unix ls command :
    $lsCmd            = "c:\\cygwin\\bin\\ls";
    #                   Unix egrep command :
    $egrepCmd         = "c:\\cygwin\\bin\\grep";
    #                   Unix fgrep command :
    $fgrepCmd         = "c:\\cygwin\\bin\\grep";

[]{#Editing_the_CGI_scripts} Editing the CGI scripts
----------------------------------------------------

**4. Editing the Shebang lines**

Now to edit the curiously named \'shebang lines\' at the top of the
TWiki CGI scripts. This is required so the Apache server knows what
interpreter (perl) to use with the scripts.

-   You **must** use the Cygwin shell to do this (unless you are a Perl
    expert) - **don\'t use** the Windows command shell, cmd.exe (aka DOS
    Prompt)
-   Then do the following, which quickly edits the 19 or so files, using
    Perl - the important lines are in bold.
-   Type the Perl line **very carefully**
    -   If you do mis-type the `perl` line, you can restore from the
        `.backup` directory and re-run the command, as it will only edit
        the original files, not the backups with \'\~\' suffixes.

<!-- -->

    $ cd /twiki/bin

    $ ls
    attach   geturl         oops     rdiff     save        testenv  viewfile
    changes  installpasswd  passwd   register  search      upload
    edit     mailnotify     preview  rename    statistics  view

    $ mkdir .backup 
    $ cp * .backup

    $ head -1 view
    #!/usr/bin/perl -wT

    $ perl -pi~ -e 's;#!/usr/bin/perl;#!c:/cygwin/bin/perl;' *[a-z]

    $ head -1 view
    #!c:/cygwin/bin/perl -wT

    $ ls
    attach    geturl          oops      rdiff      save         testenv   viewfile~
    attach~   geturl~         oops~     rdiff~     save~        testenv~  view~
    changes   installpasswd   passwd    register   search       upload
    changes~  installpasswd~  passwd~   register~  search~      upload~
    edit      mailnotify      preview   rename     statistics   view
    edit~     mailnotify~     preview~  rename~    statistics~  viewfile

If for some reason the edit goes wrong, just type `cp .backup/* .`
(while within the `bin` directory) to restore the original distribution
files. Use `ls -a` to see the `.backup` directory, and `ls -a .backup`
to view its contents.

Optional step: you can do `'rm *~'` to clean out the backups made by
Perl, but that\'s not essential as all the original files cannot be
executed. If you do this, **type the command very carefully**, as a
space after the \'\*\' will wipe out all files in this directory!

**5. Minor changes to TWiki scripts**

***TWiki Dec 2001 release only - fixed in Feb 2003 release***

If using the Dec 2001 release, you now need to make some minor edits to
files in the `c:/twiki/bin` directory, using a suitable editor (remember
to use `nano -w filename` if you prefer `nano` to `vi` - or just use the
Windows [PFE
editor](WindowsInstallCookbook#Pre_requisites_and_upgrades){.twikiAnchorLink}).

-   Edit the `register` script in `/twiki/bin` - change line 200 to read
    as follows (insert the `MIME::Base64::` part):

<!-- -->

             return $user . ':{SHA}' . MIME::Base64::encode_base64(Digest::SHA1::sha1($passwd));

-   If you are using
    [TWiki:Codev.ActiveState](http://twiki.org/cgi-bin/view/Codev.ActiveState "'Codev.ActiveState' on TWiki.org")
    Perl, you also need to update `testenv`, see
    [TWiki:Codev.CookbookActivePerlTestenv](http://twiki.org/cgi-bin/view/Codev.CookbookActivePerlTestenv "'Codev.CookbookActivePerlTestenv' on TWiki.org")

### []{#Perl_module_installation} Perl module installation

**6. Installing required Perl modules**

Some additional Perl modules are needed, above and beyond the standard
modules installed with Cygwin. Fortunately, there is an automated tool
that makes it easy to do this - it\'s called `cpan`, and goes to the
Perl module archive site, <http://www.cpan.org/>, to download all
required modules, and then build and install them.

***Note:*** if you are unable to get `cpan` working in your environment,
don\'t panic; you can still install the modules manually. In this case,
follow the instructions in [CPAN: The Hard
Way](WindowsInstallCookbook#CPANTheHardWay){.twikiAnchorLink}.

First of all, you need to get the `cpan` tool configured and working -
this is only necessary once. From the Cygwin shell, type the following
(putting the `export` command in `~/.profile` is recommended to make
this setting persistent). Without the TEMP variable, some modules may
fail to install on Windows 2000 and higher.

    $ export TEMP=/c/temp
    $ cpan

*Lots of questions about configuration and preferences - just hit Enter
until you get to the questions about mirror sites, but answer the
questions about FTP proxies etc if you are behind a proxy-based
firewall. The CPAN tool will fetch a series of files, some quite large,
as part of this setup process, so be patient\...*

***NOTE***: If you are behind a non-proxy-based firewall that requires
the use of passive FTP, the initial downloads of files using Net::FTP
may appear to hang - just wait 5 or more minutes, however, and the CPAN
tool should eventually hit on `ncftpget`, which is part of Cygwin and
does work OK. If this doesn\'t work and you are behind a typical
NAT-based firewall, try doing the following at the Cygwin shell before
running `cpan` - this forces Net::FTP to use passive FTP, letting it get
through such firewalls:

    $ export FTP_PASSIVE=1

If this works, add this line to your `~/.profile` file for future use.

Once some initial files are downloaded, you are asked to select your
continent and country, and then mirror sites - just type the number of
the mirror sites you want to use (pick a few in case one is down):

    ...
    (28) Turkey
    (29) Ukraine
    (30) United Kingdom

    Select your country (or several nearby countries) [] 30

    (1) ftp://cpan.teleglobe.net/pub/CPAN
    (2) ftp://ftp.clockerz.net/pub/CPAN/
    (3) ftp://ftp.demon.co.uk/pub/CPAN/
    (4) ftp://ftp.flirble.org/pub/languages/perl/CPAN/
    (5) ftp://ftp.mirror.ac.uk/sites/ftp.funet.fi/pub/languages/perl/CPAN/
    (6) ftp://ftp.plig.org/pub/CPAN/
    (7) ftp://mirror.uklinux.net/pub/CPAN/
    (8) ftp://sunsite.doc.ic.ac.uk/packages/CPAN/
    (9) ftp://usit.shef.ac.uk/pub/packages/CPAN/
    Select as many URLs as you like,
    put them on one line, separated by blanks [] 4 7 8

    Enter another URL or RETURN to quit: []
    New set of picks:
      ftp://ftp.flirble.org/pub/languages/perl/CPAN/
      ftp://mirror.uklinux.net/pub/CPAN/
      ftp://sunsite.doc.ic.ac.uk/packages/CPAN/

Eventually, you\'ll get to the `cpan` installer\'s shell prompt, where
you need to install a few modules - the tool will do all the work for
you.

-   ***NOTE***: You will need to have previously installed the Cygwin
    `make` and `gcc` packages, which are required by the CPAN installer
    (`gcc` is required for modules that include C language code) - you
    can install them now by launching Cygwin\'s `setup.exe` from
    `c:/download/cygwin-dist` (no need to exit the CPAN installer).

<!-- -->

    cpan shell -- CPAN exploration and modules installation (v1.59_54)
    cpan> install Net::SMTP
    May already be installed - if it is, try 'force install', since it's useful to be able to set
    firewall and passive FTP configuration when using Net::FTP.  Make sure you answer 'Y' to the question 
    about whether you want to configure this package.
    cpan> install Digest::SHA1
    Lots of output about how CPAN finds, builds and installs the module - watch for 
    any errors, though it should work fine if you have installed the Cygwin packages listed above (particularly 'gcc' and 'make').
    cpan> install MIME::Base64
    May already be installed.

[]{#CPANTheHardWay}

#### []{#CPAN_The_Hard_Way} CPAN: The Hard Way

If you find that `cpan` doesn\'t work for you, perhaps because you are
behind an uncooperative corporate firewall, you may have to fall back on
installing modules manually. In this case, you need to read the [CPAN
INSTALL page](http://www.cpan.org/modules/INSTALL.html) and visit the
[CPAN search site](http://www.cpan.org/) to search for each module you
require. Usually installation simply involves downloading the module
distribution into a temporary directory and unpacking it (a `.tar.gz` or
`.tgz` file is unpacked using `tar zxvf file`). Then do the following:

    $ perl Makefile.PL
    $ make
    $ make test
    $ make install

The `make test` step should **not** be skipped - for example, one known
problem is with the `Digest::SHA1` module on Windows NT, which does not
pass its tests and does not work. This causes problems with password
encoding. In this event you can use another encoding scheme or switch to
unencoded passwords. There may be other problems on the various Windows
configurations, and you can save yourself a lot of time.

### []{#Re_locking_RCS_files} Re-locking RCS files

**7. Re-locking files**

First, some testing: in your browser, go to
<http://yourdomain.com/bin/testenv> - this provides a lot of detail,
including warnings. Write down the Apache server\'s userid that is given
by this script - typically either \'system\' or \'administrator\' -
I\'ll assume \'system\' from now on.

-   If the `testenv` script doesn\'t work, go back and check the
    configuration of the Apache `httpd.conf` file, and `TWiki.cfg`. Have
    a look at the Apache error log, `c:/apache/logs/error_log`, and the
    TWiki error log, `/twiki/data/log*.txt`.

This \'system\' user must own the locks on the RCS files, which are
shipped with the lock held by \'nobody\'. The reason this matters is
that no revisions will be tracked by RCS unless the Apache userid
matches that of the RCS file locks.

You can re-lock files using `rcs -u` and `rcs -l`, but it\'s a painfully
manual process. Instead, just use Perl again to mass-edit all the RCS
files, as follows:

-   ***NOTE***: The \'NR \<= 10\' part of the Perl command ensures that
    it only operates on the first 10 lines, to avoid editing the body of
    RCS files for topics that happen to include the text \'nobody:\'
    (like this one\...)

<!-- -->

    $ cd /twiki/data

    $ : Make a backup of all files
    $ tar czvf all-files.tar.gz */*

    $ : Test edit a single file to check your typing
    $ perl -pi~~~ -e 'NR <= 10 && s/nobody:/system:/ ' Main/WebIndex.txt,v

    $ diff Main/WebIndex.txt,v Main/WebIndex.txt,v~~~
    5c5
    <       system:1.2; strict;
    ---
    >       nobody:1.2; strict;

    $ : Now edit all the RCS files at once - use cursor-up to recall previous command
    $ perl -pi~~~ -e 'NR <= 10 && s/nobody:/system:/ ' */*,v

    $ : Check for any remaining files not edited
    $ grep 'strict;$' */*,v | grep -v system

    $ : Clean up - type this very carefully 
    $ rm */*~~~

-   **If something goes wrong:** to restore your existing files from the
    backup, just type `tar xzvf all-files.tar.gz` and all your files,
    both .txt and .txt,v, will be back as they were before the edits.

You have now re-locked all the RCS files and are almost ready to start
using TWiki!

### []{#Email_setup} Email setup

**8. Email setup for notification and registration**

You need to set the `SMTPMAILHOST` in
[TWikiPreferences](TWikiPreferences){.twikiLink} to an SMTP email host
that is reachable and currently working. Otherwise you may get a
confusing message from TWiki (fixed in
[TWiki:Codev.TWikiRelease01Feb2003](http://twiki.org/cgi-bin/view/Codev.TWikiRelease01Feb2003 "'Codev.TWikiRelease01Feb2003' on TWiki.org"))
when registering new users or running `mailnotify` (for
[WebNotify](WebNotify){.twikiLink}), along the lines of:

       Software Error: Can't call method "mail" on an undefined value at ../lib/TWiki/Net.pm line 187.

There are other settings to be made in
[TWikiPreferences](TWikiPreferences){.twikiLink}, e.g. the
`WIKIWEBMASTER` and (probably) the `SMTPSENDERHOST` (normally your mail
server or TWiki server). See the
[TWikiInstallationGuide](TWikiInstallationGuide){.twikiLink} for more
details, what\'s listed here is just enough to let you run the basic
tests.

[]{#Testing_your_TWiki_installation} Testing your TWiki installation
--------------------------------------------------------------------

It is important to test your TWiki installation before you release it to
other users or put any significant data into it.

Here are the main things to test:

-   testenv - use `http://yourdomain.com/bin/testenv` and check for
    warnings
    -   If you are having installation trouble, download the latest
        `testenv` from
        [TWiki:Codev/TWikiAlphaRelease](http://twiki.org/cgi-bin/view/Codev/TWikiAlphaRelease "'Codev/TWikiAlphaRelease' on TWiki.org")
        and install it in `c:/twiki/bin`. (From TWiki.org, just click
        CVSget:bin/testenv to get this script)
-   Page viewing (`view` script) - click around a few pages and make
    sure the links are OK
-   RCS diffs (`rdiff` script) - click on the Diffs link and on the
    \'\>\' links at bottom of page
-   Edit a page, and register as a new user - tests page creation, use
    of `register` script to create a new user entry in
    `/twiki/data/.htpasswd` (the Apache password file), ability to send
    email via Net::SMTP, and whether `SMTPMAILHOST` was set correctly in
    [TWikiPreferences](TWikiPreferences){.twikiLink} (if it is unset it
    will not use Net::SMTP and will almost inevitably fail silently).
    -   If you get a failure to register or send email, check the Apache
        error log, and that all CPAN modules were installed correctly in
        Step 6, *Installing required Perl modules*.
    -   Try typing `tail -30 /c/apache/logs/error_log` to see last 30
        errors from Apache
-   Edit a page - check revision increased and set to current date/time
-   Edit the same page using another browser or PC, logging in as a
    different user - check there\'s a lock message (which you can
    override) and no double lines
-   Check the Apache `error_log` file to see if there are any RCS errors
    so far
-   Index - tests whether `ls` and `grep` are working
-   Search - more tests for whether `ls` and `grep` are working
-   Attachments - tests access to `/twiki/pub` directory.
    -   Try a binary attachment upload and check the number of bytes in
        the file has not changed - if it has, see the **Install Cygwin**
        section\'s note on the default text file type.
-   Check the Apache `error_log` file again

### []{#Troubleshooting} Troubleshooting

If anything doesn\'t work, go back and check the configuration of the
Apache `httpd.conf` file, and `TWiki.cfg`. Have a look at the Apache
error log, `c:/apache/logs/error_log`, and the TWiki error log,
`/twiki/data/log*.txt`, and if necessary enable debugging on selected
scripts (the commands are right at the top of each script) - the results
go into `/twiki/data/debug.txt`. There is also a
`/twiki/data/warning.txt` file that contains less serious messages.

See
[TWiki:Codev.TWikiPatches](http://twiki.org/cgi-bin/view/Codev.TWikiPatches "'Codev.TWikiPatches' on TWiki.org")
in case there are patches (i.e. specific code changes) for particular
problems that may affect you (e.g.
[TWiki:Codev.ChangePasswordOnWin2K](http://twiki.org/cgi-bin/view/Codev.ChangePasswordOnWin2K "'Codev.ChangePasswordOnWin2K' on TWiki.org")).

If you find that the Index feature doesn\'t work, or topic name searches
fail, you should check you have set `$egrepCmd` and `$fgrepCmd`
correctly, as mentioned above.

### []{#Permissions} Permissions

[TWiki:Codev.CygWin](http://twiki.org/cgi-bin/view/Codev.CygWin "'Codev.CygWin' on TWiki.org")
has several models for how it does security:

-   By default, it only implements the Unix \'write\' and \'execute\'
    permissions bits - the former is controlled by the Windows Read-Only
    attribute, while the latter is automatically assigned to files named
    \*.exe or \*.com, and to files whose first line is a shebang (i.e.
    `#!/bin/something`). This is what has been used for this cookbook.
-   You can enable the \'ntea\' or \'ntsec\' models, which will increase
    security but are also likely to introduce permission problems.

I have not had any problems with TWiki permissions on Windows, unlike
Linux/Unix, which is probably because I\'m using the default security
model for Cygwin. If you use the other models, you may still be OK if
you have local admin rights, and Apache is running as the SYSTEM user
(which it uses if started as a service). If you do have trouble in this
area, see the
[TWikiInstallationGuide](TWikiInstallationGuide){.twikiLink}\'s advice,
some of which will apply to
[TWiki:Codev.CygWin](http://twiki.org/cgi-bin/view/Codev.CygWin "'Codev.CygWin' on TWiki.org"),
and log any issues in
[TWiki:Codev.WindowsInstallCookbookComments](http://twiki.org/cgi-bin/view/Codev.WindowsInstallCookbookComments "'Codev.WindowsInstallCookbookComments' on TWiki.org").

[]{#Next_Steps} Next Steps
--------------------------

See the [TWikiInstallationGuide](TWikiInstallationGuide){.twikiLink} for
other setup. In particular, you\'ll probably want to refer to the
[section on basic
authentication](TWikiInstallationGuide#Enabling_Authentication_of_Users){.twikiAnchorLink}
- remember to use `c:/twiki` type filenames (i.e. Windows format) since
you are using Apache for Windows.

### []{#Improved_authentication} Improved authentication

You may want to investigate
[TWiki:Codev.WindowsInstallModNTLM](http://twiki.org/cgi-bin/view/Codev.WindowsInstallModNTLM "'Codev.WindowsInstallModNTLM' on TWiki.org"),
which describes how to add an Apache module so that
[TWiki:Codev.InternetExplorer](http://twiki.org/cgi-bin/view/Codev.InternetExplorer "'Codev.InternetExplorer' on TWiki.org")
users are automatically authenticated based on their Windows domain
login - this avoids
[TWiki:Codev.GettingTheUsernameWrong](http://twiki.org/cgi-bin/view/Codev.GettingTheUsernameWrong "'Codev.GettingTheUsernameWrong' on TWiki.org")
and
[TWiki:Codev.ForgettingPasswords](http://twiki.org/cgi-bin/view/Codev.ForgettingPasswords "'Codev.ForgettingPasswords' on TWiki.org"),
which are usually very common among TWiki users.

As of the
[TWiki:Codev.TWikiRelease01Sep2004](http://twiki.org/cgi-bin/view/Codev.TWikiRelease01Sep2004 "'Codev.TWikiRelease01Sep2004' on TWiki.org"),
there is built in support for several apache based authentication modes.
The [TWikiInstallationGuide](TWikiInstallationGuide){.twikiLink} has
step-by-step instructions.

### []{#Improved_performance} Improved performance

See
[TWiki:Codev.WindowsModPerlInstallCookbook](http://twiki.org/cgi-bin/view/Codev.WindowsModPerlInstallCookbook "'Codev.WindowsModPerlInstallCookbook' on TWiki.org")
and
[TWiki:Codev.ModPerl](http://twiki.org/cgi-bin/view/Codev.ModPerl "'Codev.ModPerl' on TWiki.org")
for information on installing TWiki under Apache\'s `mod_perl` - this is
somewhat more complex and follows a different model, so it\'s best to
get some experience with TWiki, Apache and Perl first.

[]{#Format_of_filenames} Format of filenames
--------------------------------------------

In your TWiki on Windows installation, it\'s worth remembering that:

-   Apache configuration files (e.g. the `.htaccess` file and
    `c:/apache/conf/httpd.conf`) always use Windows format paths, with
    forward slashes, e.g. `c:/twiki`
-   The same is true for the first line of the TWiki Perl scripts (since
    this line is interpreted by Apache), e.g. `c:/cygwin/bin/perl`
-   All other lines in the Perl scripts use Unix format paths, e.g.
    `/twiki` (using Cygwin Perl as per this cookbook)
    -   If you are using
        [TWiki:Codev.ActivePerl](http://twiki.org/cgi-bin/view/Codev.ActivePerl "'Codev.ActivePerl' on TWiki.org"),
        that will use Windows format paths, e.g. `c:/twiki`
-   Depending on the Perl version used (Cygwin or
    [TWiki:Codev.ActivePerl](http://twiki.org/cgi-bin/view/Codev.ActivePerl "'Codev.ActivePerl' on TWiki.org")),
    the TWiki.cfg file uses a mixture of Unix and Cygwin format paths -
    stick to the format used in the installation step for TWiki.cfg
-   RCS always uses Unix format paths, e.g. `/twiki`

[]{#Credits} Credits
--------------------

Material in this cookbook is heavily based on the enormous number of
contributions in
[TWiki:Codev.TWikiOnWindowsArchive](http://twiki.org/cgi-bin/view/Codev.TWikiOnWindowsArchive "'Codev.TWikiOnWindowsArchive' on TWiki.org")
and related topics - too many people to thank, but have a look at the
contributor list to
[TWiki:Codev.TWikiOnWindowsArchive](http://twiki.org/cgi-bin/view/Codev.TWikiOnWindowsArchive "'Codev.TWikiOnWindowsArchive' on TWiki.org")
to get an idea!

People who\'ve tested or reviewed this document and provided valuable
feedback include:

\--
[TWiki:Main.BernardFarrell](http://twiki.org/cgi-bin/view/Main.BernardFarrell "'Main.BernardFarrell' on TWiki.org")\
\--
[TWiki:Main.BerndSchiffer](http://twiki.org/cgi-bin/view/Main.BerndSchiffer "'Main.BerndSchiffer' on TWiki.org")\
\--
[TWiki:Main.ChrisKeith](http://twiki.org/cgi-bin/view/Main.ChrisKeith "'Main.ChrisKeith' on TWiki.org")\
\--
[TWiki:Main.CrawfordCurrie](http://twiki.org/cgi-bin/view/Main.CrawfordCurrie "'Main.CrawfordCurrie' on TWiki.org")\
\--
[TWiki:Main.DavideBaroncelli](http://twiki.org/cgi-bin/view/Main.DavideBaroncelli "'Main.DavideBaroncelli' on TWiki.org")\
\--
[TWiki:Main.DavidLeBlanc](http://twiki.org/cgi-bin/view/Main.DavidLeBlanc "'Main.DavidLeBlanc' on TWiki.org")\
\--
[TWiki:Main.JerryWard](http://twiki.org/cgi-bin/view/Main.JerryWard "'Main.JerryWard' on TWiki.org")\
\--
[TWiki:Main.MartinWittmann](http://twiki.org/cgi-bin/view/Main.MartinWittmann "'Main.MartinWittmann' on TWiki.org")\
\--
[TWiki:Main.MaryDeMarco](http://twiki.org/cgi-bin/view/Main.MaryDeMarco "'Main.MaryDeMarco' on TWiki.org")\
\--
[TWiki:Main.MattWilkie](http://twiki.org/cgi-bin/view/Main.MattWilkie "'Main.MattWilkie' on TWiki.org")\
\--
[TWiki:Main.MikeBytnar](http://twiki.org/cgi-bin/view/Main.MikeBytnar "'Main.MikeBytnar' on TWiki.org")\
\--
[TWiki:Main.PeterThoeny](http://twiki.org/cgi-bin/view/Main.PeterThoeny "'Main.PeterThoeny' on TWiki.org")\
\--
[TWiki:Main.RossC](http://twiki.org/cgi-bin/view/Main.RossC "'Main.RossC' on TWiki.org")\
\--
[TWiki:Main.TorbenGB](http://twiki.org/cgi-bin/view/Main.TorbenGB "'Main.TorbenGB' on TWiki.org")\
\--
[TWiki:Main.VictorGoh](http://twiki.org/cgi-bin/view/Main.VictorGoh "'Main.VictorGoh' on TWiki.org")\
\--
[TWiki:Main.WolframJahn](http://twiki.org/cgi-bin/view/Main.WolframJahn "'Main.WolframJahn' on TWiki.org")\

------------------------------------------------------------------------

![ALERT!](../pub/TWiki/TWikiDocGraphics/warning.gif){width="16"
height="16"} Comments welcome at
[TWiki:Codev.WindowsInstallCookbookComments](http://twiki.org/cgi-bin/view/Codev.WindowsInstallCookbookComments "'Codev.WindowsInstallCookbookComments' on TWiki.org")\
[]{#TopicEnd}
:::

::: {.twikiTopicInfo .twikiRevInfo .twikiGrayText .twikiMoved}
:::
:::
:::
:::
